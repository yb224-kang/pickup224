# [R&D 보고서] 홈택스 세목별 신고현황 API 및 데이터 필드 분석

## 1. 개요
홈택스 세무대리전용 메뉴 중 '신고내역 조회(접수증·납부서)' 기능의 API 통신 구조와 획득 가능한 데이터 필드를 분석했습니다. 원천세, 부가세, 법인세를 포함한 총 8개 세목이 동일한 공통 조회 프레임워크를 사용하고 있음을 전수 확인했습니다.

## 2. 조사 대상 세목 (8종 확인 완료)
1. 원천세 (0405030000)
2. 부가세 (0405010000)
3. 법인세 (0405020000)
4. 종합소득세 (0405040000)
5. 양도소득세 (0405050000)
6. 상속세 (0405150000)
7. 증여세 (0405060000)
8. 종합부동산세 (0405070000)

## 3. 기술적 통신 명세
모든 세목의 조회 팝업은 아래의 공통 API를 호출합니다.

- **Endpoint URL**: `https://teht.hometax.go.kr/wqAction.do?actionId=ATERNABA016R01&screenId=UTERNAAZ0Z31&popupYn=true&realScreenId=UTERNAAZ0Z31`
- **HTTP Method**: `POST`
- **Content-Type**: `application/xml; charset=UTF-8`
- **조회 프레임워크 ID**: `UTERNAAZ0Z31` (웹스퀘어 공통 컴포넌트)

### 주요 요청 파라미터 (XML Payload 구조)
| 파라미터명 | 설명 | 비고 |
| :--- | :--- | :--- |
| `rtnDtSrt` | 조회 시작일 | YYYYMMDD |
| `rtnDtEnd` | 조회 종료일 | YYYYMMDD |
| `txprRgtNo` | 사업자/주민등록번호 | 특정 거래처 조회 시 필수 |
| `wrtMthCd` | 작성방법코드 | 조회 조건 구분 |
| `infoOthYn` | 정보공개여부 | 기본값 'Y' |

## 4. 데이터 필드 분석 결과
조회 결과 응답(XML/JSON)에 포함된 필드 정보입니다.

### 4.1. 프론트엔드(UI) 표출 필드
- 과세연월 (YYYY년MM월)
- 신고서 종류 / 신고구분 / 신고유형
- 상호(성명) / 사업자(주민)등록번호
- 접수방법 / 접수일시 / 접수번호
- 제출자 ID / 지방소득세 납부여부

### 4.2. 백엔드(API 응답) 전용 핵심 필드 (화면 미표시)
가장 중요한 수집 포인트인 **납부세액**이 백엔드 응답에 포함되어 있습니다.

| 필드 구분 | 데이터 내용 | 용도 |
| :--- | :--- | :--- |
| **세액 정보** | `rtnAmt`(본세), `eduAmt`(교육세), `agrAmt`(농특세) | 거래처별 실제 납부액 파악 |
| **코드 정보** | `txItemCd`(세목코드), `rtnKndCd`(신고종류코드) | 데이터 분류 및 검증 |
| **식별 정보** | `tin`, `ecabId`(내부 식별자), `cvplId`(민원ID) | 후속 처리(접수증 출력 등) 연동 |


## 4. 수집 코드 구현 가이드
1. **세션 유지**: `fetch-all-clients.py`와 같이 SSO 인증을 통한 세션(Cookie) 및 권한 획득이 선행되어야 합니다.
2. **공통성 활용**: `actionId=ATERNABA016R01`를 사용하는 조회 로직은 하나로 통합하여 구현하고, 호출 시 파라미터나 URL의 `tm3lIdx` 값만 변경하여 8개 세목에 대응할 수 있습니다.
## 5. 향후 과제
- 각 세목별 `txItemCd` 및 `rtnKndCd` 리스트 상용화.
- 실제 조회 데이터가 없는 경우의 예외 응답 패턴 확인.
